<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width initial-scale=1"> <meta name="author" content="Ricardo Lopes"> <meta name="description" content="This is the last part of my small series of tutorials about building your own blog with Jekyll, no autogenerated code included. You can read the previous pos..."> <title>Setting up a hacker's blog with Jekyll, part 3</title> <link rel="stylesheet" href="/css/main.css" type="text/css"> <link rel="canonical" href="http://ricardolopes.net/blog/setting-up-a-hackers-blog-with-jekyll-part-3/"> <link rel="alternate" type="application/rss+xml" title="" href="http://feeds.feedburner.com/ricardolopes/blog"> <link rel="shortcut icon" href="/favicon.ico"> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-23588237-1', 'auto'); ga('send', 'pageview'); </script> <meta property="og:locale" content="en_GB"> <meta property="og:site_name" content="Ricardo Lopes"> <meta property="og:title" content="Setting up a hacker's blog with Jekyll, part 3"> <meta property="og:description" content="This is the last part of my small series of tutorials about building your own blog with Jekyll, no autogenerated code included. You can read the previous pos..."> <meta property="og:url" content="http://ricardolopes.net/blog/setting-up-a-hackers-blog-with-jekyll-part-3/"> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@ricardoplopes"> <meta name="twitter:title" content="Setting up a hacker's blog with Jekyll, part 3"> <meta name="twitter:description" content="This is the last part of my small series of tutorials about building your own blog with Jekyll, no autogenerated code included. You can read the previous pos..."> <meta name="twitter:url" content="http://ricardolopes.net/blog/setting-up-a-hackers-blog-with-jekyll-part-3/"> </head> <body> <div class="header"> <div class="wrapper"> <h1><a href="http://ricardolopes.net/blog/">Ricardo Lopes</a></h1> <a class="header-btn" href="http://feeds.feedburner.com/ricardolopes/blog"> <span class="rss icon" aria-hidden="true"></span> <span class="btn-description">Subscribe</span> </a> </div> </div> <div class="wrapper"> <article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <meta itemprop="wordCount" content="2939"> <link itemprop="url" href="http://ricardolopes.net/blog/setting-up-a-hackers-blog-with-jekyll-part-3/"> <meta itemprop="description" content="This is the last part of my small series of tutorials about building your own blog with Jekyll, no autogenerated code included. You can read the previous posts, part 1 and part 2. In this last tutorial we’ll be working with the same blog example code as in the previous ones. However, if you’re just looking for a particular solution to a problem you might be facing, these examples should be self-contained enough to help. "> <meta itemprop="author" content="Ricardo Lopes"> <h1 class="post-title" itemprop="headline">Setting up a hacker's blog with Jekyll, part 3</h1> <ul class="post-meta"> <li aria-label="Category"> <span class="category icon" aria-hidden="true"></span> <a href="/blog/categories/tutorial"> Tutorial </a> </li> <li aria-label="Publication date"> <span class="calendar icon" aria-hidden="true"></span> <time itemprop="datePublished" datetime="2015-06-19"> 19 Jun 2015 </time> </li> <li aria-label="Reading time"> <span class="reading icon" aria-hidden="true"></span> About 16 minutes </li> </ul> <div class="content" itemprop="articleBody"> <p>This is the last part of my small series of tutorials about building your own blog with Jekyll, no autogenerated code included. You can read the previous posts, <a href="/blog/setting-up-a-hackers-blog-with-jekyll/">part 1</a> and <a href="/blog/setting-up-a-hackers-blog-with-jekyll-part-2/">part 2</a>. In this last tutorial we’ll be working with the same blog example code as in the previous ones. However, if you’re just looking for a particular solution to a problem you might be facing, these examples should be self-contained enough to help.</p> <p>Just to recap from the previous tutorials: we’re using the gem <a href="http://jekyllrb.com/">Jekyll</a> to generate our blog’s static pages. We do that by running <code>jekyll serve</code>, which also allows us to test it in our browser locally. Our blog code structure is currently looking like this:</p> <figure class="highlight"><pre><code class="language-bash" data-lang="bash">_config.yml
_layouts
    default.html
    post.html
_includes
    disqus.html
    paginator.html
_posts
    2015-02-01-hello-world.md
    2015-03-01-my-second-post.md
    2015-04-01-aprils-fools-post.md
_site
index.html</code></pre></figure> <p>And now let’s improve it.</p> <h2 id="rss-feed">RSS feed</h2> <p>What’s a blog without an RSS feed to let readers subscribe to it? To get one, you need an XML file complying with the RSS spec, and then a link to that file from your default layout, so that it’s available for every page of your blog. Let’s start with the XML file. You can simply create a <code>feed.xml</code> in your project root, like you have for <code>index.html</code>. Let’s fill it with the blog’s latest posts:</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml">---
---

<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;rss</span> <span class="na">version=</span><span class="s">&quot;2.0&quot;</span> <span class="na">xmlns:atom=</span><span class="s">&quot;http://www.w3.org/2005/Atom&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;channel&gt;</span>
    <span class="nt">&lt;title&gt;</span>{{ site.name | xml_escape }}<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;description&gt;</span>{{ site.description | xml_escape }}<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;link&gt;</span>{{ site.url }}<span class="nt">&lt;/link&gt;</span>
    <span class="nt">&lt;atom:link</span> <span class="na">href=</span><span class="s">&quot;{{ site.url }}/feed.xml&quot;</span> <span class="na">rel=</span><span class="s">&quot;self&quot;</span> <span class="na">type=</span><span class="s">&quot;application/rss+xml&quot;</span> <span class="nt">/&gt;</span>
    {% for post in site.posts limit:10 %}
      <span class="nt">&lt;item&gt;</span>
        <span class="nt">&lt;title&gt;</span>{{ post.title | xml_escape }}<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;description&gt;</span>{{ post.content | xml_escape }}<span class="nt">&lt;/description&gt;</span>
        <span class="nt">&lt;pubDate&gt;</span>{{ post.date | date_to_rfc822 }}<span class="nt">&lt;/pubDate&gt;</span>
        <span class="nt">&lt;link&gt;</span>{{ site.url }}{{ post.url }}<span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;guid</span> <span class="na">isPermaLink=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>{{ site.url }}{{ post.url }}<span class="nt">&lt;/guid&gt;</span>
      <span class="nt">&lt;/item&gt;</span>
    {% endfor %}
  <span class="nt">&lt;/channel&gt;</span>
<span class="nt">&lt;/rss&gt;</span></code></pre></figure> <p>This code fetches relevant information from <code>site.name</code>, <code>site.description</code>, <code>site.url</code> and <code>site.posts</code>. That last one we already used in the first tutorial for building the initial index page, so should be no surprise. The other ones are values we can define in <code>_config.yml</code>. We’ve previously set the value of <code>name</code>. Now we can add <code>description</code> and <code>url</code> as well:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html">name: My blog
description: This is my new blog
url: http://www.example.com

author: Ricardo Lopes
twitter: ricardoplopes

permalink: &quot;/:title&quot;

paginate: 2
paginate_path: &quot;/:num&quot;</code></pre></figure> <p>Now, Jekyll should have generated a <code>_site/feed.xml</code> file that includes the blog’s posts. The last thing we need to do is including the feed in the blog pages. We can do that in <code>_layouts/default.html</code>, so that all pages include it, by placing the relevant line inside the <code>&lt;head&gt;</code> element:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html">---
---

<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>{{ site.name }}<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;alternate&quot;</span> <span class="na">type=</span><span class="s">&quot;application/rss+xml&quot;</span> <span class="na">title=</span><span class="s">&quot;{{ site.title }}&quot;</span> <span class="na">href=</span><span class="s">&quot;{{ site.url }}/feed.xml&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;max-width: 800px; margin: 20px auto&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h1&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/&quot;</span><span class="nt">&gt;</span>{{ site.name }}<span class="nt">&lt;/a&gt;&lt;/h1&gt;</span>

      {{ content }}

      <span class="nt">&lt;hr&gt;</span>
      © {{ site.time | date: &#39;%Y&#39; }} {{ site.author }}.
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;https://twitter.com/{{ site.twitter }}&quot;</span><span class="nt">&gt;</span>Follow me on Twitter<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure> <p>And that’s all you need to do to set up a feed so that your readers can start subscribing to your blog.</p> <p>And now for something completely different: styling.</p> <h2 id="styling-with-sass">Styling with SASS</h2> <p>Given the choice between something terrible and an improvement, you’d probably go for the improvement. So our blog’s style will be in SASS instead of plain CSS. Those files will live in the new <code>_sass</code> directory of our project (didn’t see that one coming). For every <code>jekyll serve</code>, the SASS files will be compiled and the necessary CSS will be generated in the <code>_site</code> directory, like the rest of the generated static pages.</p> <p>Let’s start this exercise with a simple refactor. Just by looking at the last code example, we can see some ugly inline CSS in an HTML file. That’s not what any serious codebase should look like. Let’s separate those styles into their own styling file (like <code>_sass/style.scss</code>) and leave the HTML alone:</p> <figure class="highlight"><pre><code class="language-scss" data-lang="scss"><span class="nn">#body</span> <span class="p">{</span>
  <span class="na">max-width</span><span class="o">:</span> <span class="mi">800</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">margin</span><span class="o">:</span> <span class="mi">20</span><span class="kt">px</span> <span class="no">auto</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure> <p>We’re applying those rules to a DOM element with id <code>body</code>. So now, in <code>_layouts/default.html</code>, we can replace:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;max-width: 800px; margin: 20px auto&quot;</span><span class="nt">&gt;</span></code></pre></figure> <p>with:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;body&quot;</span><span class="nt">&gt;</span></code></pre></figure> <p>Great, so now if you check the newly generated pages… you’ll see that we’ve just broken the previous style. That’s because we still need to include the generated CSS file, <code>css/main.css</code>, in the layout. The final code should now look like this:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html">---
---

<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>{{ site.name }}<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;/css/main.css&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;alternate&quot;</span> <span class="na">type=</span><span class="s">&quot;application/rss+xml&quot;</span> <span class="na">title=</span><span class="s">&quot;{{ site.title }}&quot;</span> <span class="na">href=</span><span class="s">&quot;{{ site.url }}/feed.xml&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;body&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h1&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/&quot;</span><span class="nt">&gt;</span>{{ site.name }}<span class="nt">&lt;/a&gt;&lt;/h1&gt;</span>

      {{ content }}

      <span class="nt">&lt;hr&gt;</span>
      © {{ site.time | date: &#39;%Y&#39; }} {{ site.author }}.
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;https://twitter.com/{{ site.twitter }}&quot;</span><span class="nt">&gt;</span>Follow me on Twitter<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure> <p>Now we should get our old style back.</p> <p>Because SASS augments CSS in some interesting ways, we can explore new things in our new styles file:</p> <figure class="highlight"><pre><code class="language-scss" data-lang="scss"><span class="nv">$body-width</span><span class="o">:</span> <span class="mi">800</span><span class="kt">px</span><span class="p">;</span>
<span class="nv">$phone-max-width</span><span class="o">:</span> <span class="mi">570</span><span class="kt">px</span><span class="p">;</span>

<span class="nv">$desktop-vertical-margins</span><span class="o">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
<span class="nv">$phone-vertical-margins</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>

<span class="nv">$main-color</span><span class="o">:</span> <span class="mh">#F91111</span><span class="p">;</span>
<span class="nv">$text-color</span><span class="o">:</span> <span class="mh">#564A4A</span><span class="p">;</span>

<span class="k">@mixin</span><span class="nf"> on-phone</span> <span class="p">{</span>
  <span class="k">@media</span> <span class="nt">screen</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">max-width</span><span class="nd">:</span> <span class="err">$</span><span class="nt">phone-max-width</span><span class="o">)</span> <span class="p">{</span>
    <span class="k">@content</span><span class="o">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nn">#body</span> <span class="p">{</span>
  <span class="na">max-width</span><span class="o">:</span> <span class="nv">$body-width</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="nv">$text-color</span><span class="p">;</span>
  <span class="na">margin</span><span class="o">:</span> <span class="nv">$desktop-vertical-margins</span> <span class="no">auto</span><span class="p">;</span>
  <span class="k">@include</span><span class="nd"> on-phone</span> <span class="p">{</span>
    <span class="na">margin</span><span class="o">:</span> <span class="nv">$phone-vertical-margins</span> <span class="no">auto</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nt">a</span> <span class="p">{</span>
  <span class="na">color</span><span class="o">:</span> <span class="nv">$main-color</span><span class="p">;</span>
  <span class="na">text-decoration</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>

  <span class="k">&amp;</span><span class="nd">:hover</span> <span class="p">{</span>
    <span class="na">color</span><span class="o">:</span> <span class="nf">lighten</span><span class="p">(</span><span class="nv">$color-main</span><span class="o">,</span> <span class="mi">15</span><span class="kt">%</span><span class="p">);</span>
    <span class="na">text-decoration</span><span class="o">:</span> <span class="no">underline</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure> <p>Some things this code does, if you’re not too familiar with SASS:</p> <ul> <li>Nesting: if we’re styling links and want to ad additional styles to its <code>hover</code> status, we only need to define <code>&amp;:hover</code> inside <code>a</code>, instead of having a separate <code>a:hover</code>. Great for avoiding scattering things all over the place;</li> <li>Saving commonly used values like colours into variables that can be used in CSS properties. Great for DRY;</li> <li>Using mixins to define different styles for different situations, like setting a smaller margin for smartphones. Also great for DRY.</li> </ul> <p>Studying the things we can do with SASS is out of scope of this tutorial, so if you want to know more, I encourage you to explore the great tutorials that can be found online.</p> <h2 id="categories">Categories</h2> <p>Now that the blog is looking more complete, we want to be able to categorise posts. Every post starts with a front matter that configures, in YAML, the post’s metadata. So if we want to add a category to a post, we just need to define it like this:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html">---
title: Hello World!
category: unrelated
---

Welcome to my new **blog**!</code></pre></figure> <p>And now we can change <code>index.html</code> to include the post category:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html">---
layout: default
---

{% for post in paginator.posts %}
  <span class="nt">&lt;h2&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ post.url }}&quot;</span><span class="nt">&gt;</span>{{ post.title }}<span class="nt">&lt;/a&gt;&lt;/h2&gt;</span>
  {% if post.category %}<span class="nt">&lt;p&gt;</span>Category: {{ post.category }}<span class="nt">&lt;/p&gt;</span>{% endif %}
  {{ post.excerpt }}
{% endfor %}

{% include paginator.html %}</code></pre></figure> <p>And we can also change <code>_layouts/post.html</code> to do the same change:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html">---
layout: default
---

<span class="nt">&lt;h2&gt;</span>{{ page.title }}<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;p&gt;</span>
  {{ page.date | date_to_string }}
  {% if post.category %} | Category: {{ post.category }}{% endif %}
<span class="nt">&lt;/p&gt;</span>
{{ content }}

{% include disqus.html %}</code></pre></figure> <p>Great. Now we want categories to link to their own pages, where we can see the list of all the posts with that category. Unfortunately, Jekyll doesn’t support that. Fortunately, it lets us build our own custom plugins, so we will do just that to solve our problem.</p> <p>Plugins in Jekyll can be Generators, Converters, Commands and Tags. You can check the <a href="http://jekyllrb.com/docs/plugins/">documentation</a> for more details on each type of plugin. We’ll build a generator that will, unsurprisingly, generate new pages for the blog’s categories. That generator will use a new layout, similar to our existing <code>index.html</code>, but showing only the posts for that category, and including the category name as a page title. Let’s then create a <code>_layouts/category_index.html</code> with the following code:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html">---
layout: default
---

<span class="nt">&lt;h2&gt;</span>{{ page.category }}<span class="nt">&lt;/h2&gt;</span>

{% for post in site.posts %}
  {% if post.category == page.category %}
    <span class="nt">&lt;h2&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ post.url }}&quot;</span><span class="nt">&gt;</span>{{ post.title }}<span class="nt">&lt;/a&gt;&lt;/h2&gt;</span>
    {{ post.excerpt }}
  {% endif %}
{% endfor %}</code></pre></figure> <p>We can now start developing the plugin. It will go into the new <code>_plugins</code> directory. Let’s call it <code>_plugins/categories.rb</code>. Its classes will live inside the <code>Jekyll</code> module. The first step will be to define the category index page for the generator to use:</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">module</span> <span class="nn">Jekyll</span>
  <span class="k">class</span> <span class="nc">CategoryIndex</span> <span class="o">&lt;</span> <span class="no">Page</span>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">category</span><span class="p">)</span>
      <span class="vi">@site</span> <span class="o">=</span> <span class="n">site</span>
      <span class="vi">@base</span> <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">source</span>
      <span class="vi">@dir</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;categories&#39;</span><span class="p">,</span> <span class="no">Utils</span><span class="o">.</span><span class="n">slugify</span><span class="p">(</span><span class="n">category</span><span class="p">))</span>
      <span class="vi">@name</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="vi">@name</span><span class="p">)</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="vi">@base</span><span class="p">,</span> <span class="s1">&#39;_layouts&#39;</span><span class="p">),</span> <span class="s1">&#39;category_index.html&#39;</span><span class="p">)</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;category&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="n">category</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure> <p>If you’ve noticed the new <code>page.category</code> in the <code>_layouts/category_index.html</code> code, you can now see that it comes from this <code>CategoryIndex</code>, from this line: <code>self.data['category'] = category</code>. We can now add the generator that will create a new <code>CategoryIndex</code> for every category of the blog and save it as a blog page:</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">module</span> <span class="nn">Jekyll</span>
  <span class="k">class</span> <span class="nc">CategoryIndex</span> <span class="o">&lt;</span> <span class="no">Page</span>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">category</span><span class="p">)</span>
      <span class="vi">@site</span> <span class="o">=</span> <span class="n">site</span>
      <span class="vi">@base</span> <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">source</span>
      <span class="vi">@dir</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;categories&#39;</span><span class="p">,</span> <span class="no">Utils</span><span class="o">.</span><span class="n">slugify</span><span class="p">(</span><span class="n">category</span><span class="p">))</span>
      <span class="vi">@name</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="vi">@name</span><span class="p">)</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="vi">@base</span><span class="p">,</span> <span class="s1">&#39;_layouts&#39;</span><span class="p">),</span> <span class="s1">&#39;category_index.html&#39;</span><span class="p">)</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;category&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="n">category</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">class</span> <span class="nc">CategoryGenerator</span> <span class="o">&lt;</span> <span class="no">Generator</span>
    <span class="n">safe</span> <span class="kp">true</span>
    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="n">site</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">site</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">key?</span> <span class="s1">&#39;category_index&#39;</span>
        <span class="n">site</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">category</span><span class="o">|</span>
          <span class="n">write_category_index</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">category</span><span class="p">)</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">write_category_index</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">category</span><span class="p">)</span>
      <span class="n">index</span> <span class="o">=</span> <span class="no">CategoryIndex</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">category</span><span class="p">)</span>
      <span class="n">index</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">site</span><span class="o">.</span><span class="n">layouts</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">site_payload</span><span class="p">)</span>
      <span class="n">index</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">site</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
      <span class="n">site</span><span class="o">.</span><span class="n">pages</span> <span class="o">&lt;&lt;</span> <span class="n">index</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure> <p>We now finally have category pages. So we can update <code>index.html</code> and <code>_layouts/post.html</code> to link to them:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html">---
layout: default
---

{% for post in paginator.posts %}
  <span class="nt">&lt;h2&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ post.url }}&quot;</span><span class="nt">&gt;</span>{{ post.title }}<span class="nt">&lt;/a&gt;&lt;/h2&gt;</span>
  {% if post.category %}<span class="nt">&lt;p&gt;</span>Category: <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/categories/{{ post.category | slugify }}&quot;</span><span class="nt">&gt;</span>{{ post.category }}<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>{% endif %}
  {{ post.excerpt }}
{% endfor %}

{% include paginator.html %}</code></pre></figure> <figure class="highlight"><pre><code class="language-html" data-lang="html">---
layout: default
---

<span class="nt">&lt;h2&gt;</span>{{ page.title }}<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;p&gt;</span>
  {{ page.date | date_to_string }}
  {% if page.category %} | Category: <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/categories/{{ page.category | slugify }}&quot;</span><span class="nt">&gt;</span>{{ page.category }}<span class="nt">&lt;/a&gt;</span>{% endif %}
<span class="nt">&lt;/p&gt;</span>
{{ content }}

{% include disqus.html %}</code></pre></figure> <p>And now we finally have categories fully working. Please beware that if you’re using Github Pages to host your blog, it blocks most plugins (including all custom ones) from running. So if you’re using it, you should make sure that you’ve generated the <code>_site</code> directory (that way it doesn’t matter that it doesn’t run your plugins, because the static pages have already been generated).</p> <h2 id="tags">Tags</h2> <p>One more thing: post tags. These are very similar to categories: you can just define them in the post’s front matter, but there’s no Jekyll support for individual tag pages, so we must create our own. Fortunately, because it’s so similar to categories, we can draw inspiration from the previous section.</p> <p>First, we’ll add a list of tags to our posts:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html">---
title: Hello World!
category: unrelated
tags:
 - hello world
 - blog
---

Welcome to my new **blog**!</code></pre></figure> <p>Now we can create the layout for the tag individual pages, where we’ll show a list of posts with that tag. Let’s call it <code>_layout/tag_index.html</code>:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html">---
layout: default
---

<span class="nt">&lt;h2&gt;</span>{{ page.tag }}<span class="nt">&lt;/h2&gt;</span>

{% for post in site.posts %}
  {% for tag in post.tags %}
    {% if tag == page.tag %}
      <span class="nt">&lt;h2&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ post.url }}&quot;</span><span class="nt">&gt;</span>{{ post.title }}<span class="nt">&lt;/a&gt;&lt;/h2&gt;</span>
      {{ post.excerpt }}
    {% endif %}
  {% endfor %}
{% endfor %}</code></pre></figure> <p>We can now adapt the code in <code>_plugins/categories.rb</code> to generate these tag index pages and their generator, and save it in the new <code>_plugins/tags.rb</code>:</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">module</span> <span class="nn">Jekyll</span>
  <span class="k">class</span> <span class="nc">TagIndex</span> <span class="o">&lt;</span> <span class="no">Page</span>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
      <span class="vi">@site</span> <span class="o">=</span> <span class="n">site</span>
      <span class="vi">@base</span> <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">source</span>
      <span class="vi">@dir</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="no">Utils</span><span class="o">.</span><span class="n">slugify</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span>
      <span class="vi">@name</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="vi">@name</span><span class="p">)</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="vi">@base</span><span class="p">,</span> <span class="s1">&#39;_layouts&#39;</span><span class="p">),</span> <span class="s1">&#39;tag_index.html&#39;</span><span class="p">)</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;tag&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="n">tag</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">class</span> <span class="nc">TagGenerator</span> <span class="o">&lt;</span> <span class="no">Generator</span>
    <span class="n">safe</span> <span class="kp">true</span>
    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="n">site</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">site</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">key?</span> <span class="s1">&#39;tag_index&#39;</span>
        <span class="n">site</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">tag</span><span class="o">|</span>
          <span class="n">write_tag_index</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">write_tag_index</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
      <span class="n">index</span> <span class="o">=</span> <span class="no">TagIndex</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
      <span class="n">index</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">site</span><span class="o">.</span><span class="n">layouts</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">site_payload</span><span class="p">)</span>
      <span class="n">index</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">site</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
      <span class="n">site</span><span class="o">.</span><span class="n">pages</span> <span class="o">&lt;&lt;</span> <span class="n">index</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure> <p>And finally we add the list of post tags to <code>index.html</code> and <code>_layouts/post.html</code>:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html">---
layout: default
---

{% for post in paginator.posts %}
  <span class="nt">&lt;h2&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ post.url }}&quot;</span><span class="nt">&gt;</span>{{ post.title }}<span class="nt">&lt;/a&gt;&lt;/h2&gt;</span>
  {% if post.category %}<span class="nt">&lt;p&gt;</span>Category: <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/categories/{{ post.category | slugify }}&quot;</span><span class="nt">&gt;</span>{{ post.category }}<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>{% endif %}
  {{ post.excerpt }}
  <span class="nt">&lt;p&gt;</span>Post tags:<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;ul&gt;</span>
    {% for tag in post.tags %}
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/tags/{{ tag | slugify }}&quot;</span><span class="nt">&gt;</span>{{ tag }}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    {% endfor %}
  <span class="nt">&lt;/ul&gt;</span>
{% endfor %}

{% include paginator.html %}</code></pre></figure> <figure class="highlight"><pre><code class="language-html" data-lang="html">---
layout: default
---

<span class="nt">&lt;h2&gt;</span>{{ page.title }}<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;p&gt;</span>
  {{ page.date | date_to_string }}
  {% if page.category %} | Category: <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/categories/{{ page.category | slugify }}&quot;</span><span class="nt">&gt;</span>{{ page.category }}<span class="nt">&lt;/a&gt;</span>{% endif %}
<span class="nt">&lt;/p&gt;</span>
{{ content }}
<span class="nt">&lt;p&gt;</span>Post tags:<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;ul&gt;</span>
  {% for tag in page.tags %}
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/tags/{{ tag | slugify }}&quot;</span><span class="nt">&gt;</span>{{ tag }}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  {% endfor %}
<span class="nt">&lt;/ul&gt;</span>

{% include disqus.html %}</code></pre></figure> <p>And we also have tags working. Last section’s warning is still relevant for this: if you’re using Github Pages to host your blog, make sure you upload the generated <code>_site</code> directory, otherwise this plugin won’t work, because of their plugin restrictions.</p> <h2 id="summary">Summary</h2> <p>After having improved our blog in this last tutorial, we should now have a structure like this:</p> <figure class="highlight"><pre><code class="language-bash" data-lang="bash">_config.yml
_layouts
    category_index.html
    default.html
    post.html
    tag_index.html
_includes
    disqus.html
    paginator.html
_plugins
    categories.rb
    tags.rb
_posts
    2015-02-01-hello-world.md
    2015-03-01-my-second-post.md
    2015-04-01-aprils-fools-post.md
_saas
    style.scss
_site
index.html
feed.html</code></pre></figure> <p>We now have a fully functional blog with categories, tags, proper styling, a feed to subscribe to and all the other features shown in the previous parts of this tutorial, like comments and pagination. There is, of course, a lot more that we can do. If you’ve followed through, I’d recommend you to take a look at the official documentation, where you can find more detailed information about each thing. You can also take a look at my own blog’s <a href="https://github.com/rplopes/ricardolopes.net">source code</a>, which is open source and available on Github.</p> </div> <ul class="tags"> <li><a href="/blog/tags/jekyll">Jekyll</a></li> <li><a href="/blog/tags/ruby">Ruby</a></li> <li><a href="/blog/tags/blogging">blogging</a></li> <li><a href="/blog/tags/rss">RSS</a></li> <li><a href="/blog/tags/sass">SASS</a></li> <li><a href="/blog/tags/html">HTML</a></li> </ul> <ul class="social-share"> <li> <a class="facebook" target="_blank" rel="nofollow" title="Share on Facebook" onclick="window.open(this.href, 'mywin', 'left=200,top=100,width=500,height=300'); return false;" href="https://www.facebook.com/sharer/sharer.php?u=http://ricardolopes.net/blog/setting-up-a-hackers-blog-with-jekyll-part-3/">Share on Facebook</a> </li> <li> <a class="twitter" target="_blank" rel="nofollow" title="Tweet it" onclick="window.open(this.href, 'mywin', 'left=200,top=100,width=500,height=250'); return false;" href="https://twitter.com/intent/tweet?url=http://ricardolopes.net/blog/setting-up-a-hackers-blog-with-jekyll-part-3/&text=Setting%20up%20a%20hacker's%20blog%20with%20Jekyll%2C%20part%203&via=ricardoplopes">Tweet it</a> </li> <li> <a class="linkedin" target="_blank" rel="nofollow" title="Share on LinkedIn" onclick="window.open(this.href, 'mywin', 'left=200,top=100,width=520,height=570'); return false;" href="https://www.linkedin.com/shareArticle?mini=true&url=http://ricardolopes.net/blog/setting-up-a-hackers-blog-with-jekyll-part-3/&title=Setting up a hacker's blog with Jekyll, part 3&summary=This%20is%20the%20last%20part%20of%20my%20small%20series%20of%20tutorials%20about%20building%20your%20own%20blog%20with%20Jekyll%2C%20no%20autogenerated%20code%20included.%20You%20can%20read%20the%20previous%20posts%2C%20part%201%20and%20part%202.%20In%20this%20last%20tutorial%20we%E2%80%99ll%20be%20working%20with%20the%20same%20blog%20example%20code%20as%20in%20the%20previous%20ones.%20However%2C%20if%20you%E2%80%99re%20just%20looking%20for%20a%20particular%20solution%20to%20a%20problem%20you%20might%20be%20facing%2C%20these%20examples%20should%20be%20self-contained%20enough%20to%20help.%0A%0A&source=">Share on LinkedIn</a> </li> <li> <a class="rss" target="_blank" rel="nofollow" title="Subscribe for more" href="http://feeds.feedburner.com/ricardolopes/blog">Subscribe for more</a> </li> </ul> <div class="related-posts"> <h3>Related posts:</h3> <ul class="posts"> <li> <a href="/blog/the-most-amazing-animal-in-the-world/" class="related-post">The most amazing animal in the world</a> <ul class="post-meta"> <li aria-label="Category"> <span class="category icon" aria-hidden="true"></span> <a href="/blog/categories/talk"> Talk </a> </li> <li aria-label="Publication date"> <span class="calendar icon" aria-hidden="true"></span> <time itemprop="datePublished" datetime="2015-07-23"> 23 Jul 2015 </time> </li> <li aria-label="Reading time"> <span class="reading icon" aria-hidden="true"></span> About 5 minutes </li> </ul> </li> <li> <a href="/blog/a-laymans-guide-to-good-passwords-online/" class="related-post">A layman's guide to good passwords online</a> <ul class="post-meta"> <li aria-label="Category"> <span class="category icon" aria-hidden="true"></span> <a href="/blog/categories/tutorial"> Tutorial </a> </li> <li aria-label="Publication date"> <span class="calendar icon" aria-hidden="true"></span> <time itemprop="datePublished" datetime="2015-05-01"> 01 May 2015 </time> </li> <li aria-label="Reading time"> <span class="reading icon" aria-hidden="true"></span> About 8 minutes </li> </ul> </li> <li> <a href="/blog/setting-up-a-hackers-blog-with-jekyll-part-2/" class="related-post">Setting up a hacker's blog with Jekyll, part 2</a> <ul class="post-meta"> <li aria-label="Category"> <span class="category icon" aria-hidden="true"></span> <a href="/blog/categories/tutorial"> Tutorial </a> </li> <li aria-label="Publication date"> <span class="calendar icon" aria-hidden="true"></span> <time itemprop="datePublished" datetime="2015-03-13"> 13 Mar 2015 </time> </li> <li aria-label="Reading time"> <span class="reading icon" aria-hidden="true"></span> About 11 minutes </li> </ul> </li> </ul> </div> <div id="disqus_thread"></div> <script type="text/javascript"> /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */ var disqus_shortname = 'ricardolopes'; var disqus_identifier = '/blog/setting-up-a-hackers-blog-with-jekyll-part-3/'; var disqus_url = 'http://ricardolopes.net/blog/setting-up-a-hackers-blog-with-jekyll-part-3/'; /* * * DON'T EDIT BELOW THIS LINE * * */ (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> </article> </div> <div class="footer"> <div class="wrapper"> <div class="footer-col footer-col-1"> <img class="avatar" alt="Ricardo Lopes" src="/img/avatar.jpg"> </div> <div class="footer-col footer-col-2"> <strong>Ricardo Lopes</strong> <p class="subtext">Hacker, tech enthusiast, learner, judo black belt and occasional blogger<p> <ul class="pages"> <li><a href="http://ricardolopes.net">Website</a></li> <li><a href="http://ricardolopes.net/blog/">Blog</a></li> <li><a href="http://ricardolopes.net/blog/about">About</a></li> <li><a href="http://feeds.feedburner.com/ricardolopes/blog">RSS</a></li> </ul> </div> <div class="footer-col footer-col-3"> <ul class="social-media"> <li aria-label="Twitter"> <a target="_blank" href="https://twitter.com/ricardoplopes"> <span class="twitter icon" aria-hidden="true"></span> ricardoplopes </a> </li> <li aria-label="Github"> <a target="_blank" href="https://github.com/rplopes"> <span class="github icon" aria-hidden="true"></span> rplopes </a> </li> <li aria-label="LinkedIn"> <a target="_blank" href="https://www.linkedin.com/in/ricardopintolopes"> <span class="linkedin icon" aria-hidden="true"></span> ricardopintolopes </a> </li> <li aria-label="Email"> <a href="mailto:mail@ricardolopes.net"> <span class="email icon" aria-hidden="true"></span> mail@ricardolopes.net </a> </li> </ul> </div> </div> <div class="wrapper"> <p class="copyright">&copy; 2016 Ricardo Lopes</p> </div> </div> </body> </html>
